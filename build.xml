<?xml version="1.0" encoding="ISO-8859-1"?>

<project name="sgine" basedir="." default="compile">
	<property environment="env"/>
	
    <property name="src" location="src/main/scala"/>
	<property name="tests" location="src/test/scala"/>
    <property name="build" location="build"/>
    <property name="dist" location="dist"/>
    <property name="lib" location="lib"/>
    <property name="jar" value="${ant.project.name}.jar"/>
	<property name="jar.tests" value="${ant.project.name}.tests.jar"/>
	<property name="scala.home" location="${env.SCALA_HOME}"/>
	
    <path id="cp">
    	<fileset dir="${lib}">
    		<include name="*.jar"/>
    	</fileset>
        <fileset dir="${scala.home}/lib">
            <include name="*.jar"/>
        </fileset>
    	<fileset dir="${dist}">
    		<include name="*.jar"/>
    	</fileset>
    </path>
	
	<taskdef resource="scala/tools/ant/antlib.xml" classpathref="cp"/>

    <target name="compile">
        <delete dir="${build}"/>
        <mkdir dir="${build}"/>
    	<mkdir dir="${dist}"/>
    	<fsc srcdir="${src}" destdir="${build}" classpathref="cp" deprecation="on" unchecked="on"/>
    	<fsc srcdir="${tests}" destdir="${build}" classpathref="cp" deprecation="on" unchecked="on"/>
    </target>
	
    <target name="jar" depends="compile">
        <jar destfile="${dist}/${jar}" basedir="${build}" index="true"/>
    	<jar destfile="${dist}/${jar.tests}" basedir="${build}" index="true"/>
    </target>
	
	<target name="run-generator" depends="jar">
		<java classpathref="cp" classname="com.sgine.opengl.generator.OpenGLGenerator"/>
	</target>
	
	<target name="run-opengl-test" depends="jar">
		<java classpathref="cp" classname="com.sgine.opengl.RunTest" fork="true" jvmargs="-Djava.library.path=Z:/programming/work/workspace_idea/scalagl/lib/native/win64"/>
	</target>
	
	<target name="run-work-test" depends="jar">
		<java classpathref="cp" classname="com.sgine.work.TestPerformance"/>
	</target>
	
	<target name="run-properties-test" depends="jar">
		<java classpathref="cp" classname="com.sgine.property.TestProperties"/>
	</target>
	
	<target name="run-tests">
		<java classpathref="cp" classname="org.scalatest.tools.Runner" args="-p . -o -s com.sgine.property.PropertyTests"/>
	</target>
</project>